@model List<K9.WebApplication.Models.NineStarKiEnergy>
@using K9.SharedLibrary.Helpers
@using K9.WebApplication.Helpers
@using K9.WebApplication.Models
@using K9.WebApplication.Options

@{
    var energyType = Model?.FirstOrDefault()?.EnergyType ?? ENineStarKiEnergyType.MainEnergy;
    var mainEnergyText = TemplateProcessor.PopulateTemplate(K9.Globalisation.Dictionary.main_energies_short_description, new
    {
        RelationshipsUrl = Url.Action("Relationships", "NineStarKi")
    });
    var characterEnergyText = TemplateProcessor.PopulateTemplate(K9.Globalisation.Dictionary.character_energies_short_description, new
    {
        RelationshipsUrl = Url.Action("Relationships", "NineStarKi")
    });
}

<div class="energies-summary">
    @if (energyType == ENineStarKiEnergyType.EmotionalEnergy)
    {
        @MvcHtmlString.Create(characterEnergyText)
    }
    else
    {
        @MvcHtmlString.Create(mainEnergyText)
    }

    @if (Model != null && Model.Any())
    {
        foreach (var energy in Model)
        {
            @Html.CollapsiblePanel(energy.FullEnergyDetailsTitle, energy.EnergyDescription, false, "", "", $"Images/ninestar/energies/{energy.Energy}.png", EPanelImageSize.Default, EPanelImageLayout.Contain)
        }
    }
</div>
