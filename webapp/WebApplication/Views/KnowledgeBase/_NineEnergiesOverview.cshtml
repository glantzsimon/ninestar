@using K9.SharedLibrary.Helpers
@using K9.WebApplication.Enums
@using K9.WebApplication.Helpers
@using K9.WebApplication.Models
@using K9.WebApplication.Options
@model List<NineStarKiEnergy>

@{
    var energyType = Model?.FirstOrDefault()?.EnergyType ?? ENineStarKiEnergyType.MainEnergy;
    var mainEnergyText = TemplateProcessor.PopulateTemplate(Dictionary.main_energies_short_description, new
    {
        RelationshipsUrl = Url.Action("Index", "Relationships")
    });
    var characterEnergyText = TemplateProcessor.PopulateTemplate(Dictionary.character_energies_short_description, new
    {
        RelationshipsUrl = Url.Action("Index", "Relationships")
    });
}

<div class="energies-summary">
    @if (energyType == ENineStarKiEnergyType.CharacterEnergy)
    {
        @MvcHtmlString.Create(characterEnergyText)
    }
    else
    {
        @MvcHtmlString.Create(mainEnergyText)
    }

    @if (Model != null && Model.Any())
    {
        foreach (var energy in Model)
        {
            var id = $"{energyType}{energy.EnergyName}";
            @Html.Panel(
                energy.EnergyTitle,
                Html.PayWallContent(ESection.KnowledgeBase, id, energy.EnergyDescription).ToString(),
                id, $"Images/ninestar/energies/{energy.Energy}.png",
                EPanelImageSize.Default,
                EPanelImageLayout.Contain)
        }
    }
</div>