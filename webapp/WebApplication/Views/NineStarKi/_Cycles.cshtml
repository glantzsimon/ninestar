@using K9.WebApplication.Helpers
@model K9.WebApplication.Models.NineStarKiModel

<ul class="nav nav-pills nav-justified">
    <li class="active"><a data-toggle="tab" href="#yearly">@Dictionary.CurrentYearlyCycle</a></li>
    <li><a data-toggle="tab" href="#yearly-planner">@Dictionary.YearlyPlanner</a></li>
    <li><a data-toggle="tab" href="#monthly">@Dictionary.CurrentMonthlyCycle</a></li>
</ul>

<div class="tab-content">
    <div id="yearly" class="tab-pane fade in active">
        @Html.CollapsiblePanel(Dictionary.AboutYearlyCycles, Dictionary.year_description)

        @Html.Partial("_Cycle", Model.YearlyCycleEnergy)
    </div>

    <div id="yearly-planner" class="tab-pane fade">
        @Html.Partial("_YearlyPlanner")
    </div>

    <div id="monthly" class="tab-pane fade">
        @Html.CollapsiblePanel(Dictionary.AboutMonthlyCycles, Dictionary.month_description)

        @Html.Partial("_Cycle", Model.MonthlyCycleEnergy)
    </div>

</div>

<script language="javascript">

    function scrollCurrentYearIntoVew() {
        setTimeout(function () {
            var $cycle = $("div.current-year");
            var $yearlyPlannerContainer = ".yearly-planner-container";

            $($yearlyPlannerContainer).scrollTop($cycle.offset().top - $($yearlyPlannerContainer).offset().top);
        }, 200);
    }

    $(function () {
        $("a[href='#yearly-planner']").click(function() {
            scrollCurrentYearIntoVew();
        });
    });
</script>