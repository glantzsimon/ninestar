@using K9.Base.WebApplication.Extensions
@using K9.SharedLibrary.Authentication
@using K9.WebApplication.Enums
@using K9.WebApplication.Extensions
@using K9.WebApplication.Helpers
@model K9.WebApplication.Models.NineStarKiModel

@{
    var adultActiveClass = Model.PersonModel.IsAdult() ? "in active" : "disabled";
    var childActiveClass = Model.PersonModel.IsAdult() ? "" : "in active";
    var activeUserMembership = this.GetActiveUserMembership();
}

@using (Html.BeginBootstrapForm())
{
    <h4 class="margin-top-0 margin-bottom-10">@Dictionary.PersonalProfileDetails</h4>
    <div class="ninestar-summmary container padding-0 margin-top-15">
        <ul class="nav nav-pills nav-justified">
            @if (Model.PersonModel.IsAdult())
            {
                <li class="active"><a data-toggle="tab" href="#adult">@Model.MainEnergy.AdultEnergyLabel</a></li>
                <li><a data-toggle="tab" href="#emotional">@Model.CharacterEnergy.CharacteEnergyLabel</a></li>
            }
            else
            {
                <li class="active"><a data-toggle="tab" href="#emotional">@Model.CharacterEnergy.CharacteEnergyLabel</a></li>
            }

            <li><a data-toggle="tab" href="#surface">@Dictionary.ExternalPersona</a></li>
            <li><a data-toggle="tab" href="#sexuality">@Dictionary.SexualityLabel</a></li>
        </ul>

        <div class="tab-content">
            <div id="adult" class="tab-pane fade @adultActiveClass">
                @Html.Panel(K9.Base.Globalisation.Dictionary.DescriptionLabel, Dictionary.MainEnergyDescription)

                @Html.Partial("_NineStarHeader", Model.MainEnergy)
                <hr />
                @Html.Partial("_NineStarDetail", Model)
            </div>

            <div id="emotional" class="tab-pane fade @childActiveClass">
                @Html.Panel(K9.Base.Globalisation.Dictionary.DescriptionLabel, Dictionary.CharacterEnergyDescription)

                @Html.Partial("_NineStarHeader", Model.CharacterEnergy)
                <hr />
                @Html.Partial("_NineStarBody", Model.CharacterEnergy)
            </div>

            <div id="surface" class="tab-pane fade">
                @Html.Panel(K9.Base.Globalisation.Dictionary.DescriptionLabel, Dictionary.SurfaceEnergyDescription)

                @Html.Partial("_NineStarHeader", Model.SurfaceEnergy)
                <hr />
                @Html.Partial("_NineStarBody", Model.SurfaceEnergy)
            </div>

            <div id="sexuality" class="tab-pane fade">
                @Html.Panel(K9.Base.Globalisation.Dictionary.DescriptionLabel, Dictionary.sexuality_description)

                @if (WebSecurity.IsAuthenticated)
                {
                    if (this.GetRoles().CurrentUserIsInRoles(RoleNames.Administrators))
                    {
                        if (activeUserMembership == null || Model.ReadingType == EReadingType.Free)
                        {
                            <br />
                            <h5>
                                @Html.Raw(Dictionary.UpgradeMembershipFullText)
                            </h5>
                            @Html.BootstrapActionLinkButton(Dictionary.UpgradeMembershipText, "Index", "Membership")
                        }
                        else if (Model.ReadingType == EReadingType.Complete)
                        {
                            @Html.Panel(Model.EnergySexualityLabel, Model.MainEnergySexualityDetails)

                            @Html.Panel(Model.SexualityRelationTypeLabel, Html.Partial("_Sexuality").ToString())
                        }
                    }
                    else
                    {
                        <br />
                        <h4 class="text-center">@Dictionary.ComingSoon</h4>
                    }
                }
                @*else
        {
            <br />
            @Html.BootstrapActionLinkButton(Dictionary.LogIntoYourAccountToView, "Login", "Account")
        }*@
            </div>

        </div>
    </div>
}