@using K9.SharedLibrary.Extensions
@using K9.WebApplication.Config
@model K9.WebApplication.Models.NineStarKiModel

<div class="container main-content clear-both daily-planner-container margin-top-5">
    <div class="calendar-grid">
        <!-- Day headers -->
        <div class="calendar-header">@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetDayName(DayOfWeek.Monday)</div>
        <div class="calendar-header">@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetDayName(DayOfWeek.Tuesday)</div>
        <div class="calendar-header">@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetDayName(DayOfWeek.Wednesday)</div>
        <div class="calendar-header">@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetDayName(DayOfWeek.Thursday)</div>
        <div class="calendar-header">@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetDayName(DayOfWeek.Friday)</div>
        <div class="calendar-header">@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetDayName(DayOfWeek.Saturday)</div>
        <div class="calendar-header">@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetDayName(DayOfWeek.Sunday)</div>

        @{
            bool isFirst = true;
            var daysOfWeek = new Dictionary<string, int> {
                { "Monday", 0 }, { "Tuesday", 1 }, { "Wednesday", 2 },
                { "Thursday", 3 }, { "Friday", 4 }, { "Saturday", 5 }, { "Sunday", 6 }
            };
        }

        @foreach (var cycle in Model.GetDailyPlanner())
        {
            var year = cycle.Item1;
            var month = cycle.Item2;
            var day = cycle.Item3;
            var dayName = cycle.Item4;
            var monthName = cycle.Item5;
            var energy = cycle.Item6;

            // Add padding for first row
            if (isFirst)
            {
                var offset = daysOfWeek.ContainsKey(dayName) ? daysOfWeek[dayName] : 0;
                for (int i = 0; i < offset; i++)
                {
                    <div class="empty-cell"></div>
                }
                isFirst = false;
            }

            <div class="calendar-day">
                <div class="date-label">@monthName @day</div>
                <div class="custom-content">
                    <img loading="lazy" title="@energy.EnergyName" alt="@Dictionary.NineStarKiAstrologyFreeCalculator @energy.EnergyName" class="auto-size center-block" src="@DefaultValuesConfiguration.Instance.BaseImagesPath/ninestar/energies/@(energy.Energy.ToString().ToLower()).png" />
                </div>
            </div>
        }
    </div>
</div>
