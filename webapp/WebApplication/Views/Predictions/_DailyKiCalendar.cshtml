@using K9.SharedLibrary.Extensions
@using K9.WebApplication.Config
@model K9.WebApplication.Models.NineStarKiModel

<div class="container main-content clear-both daily-planner-container margin-top-5">
    <div class="calendar-grid">
        <!-- Day headers -->
        <div class="calendar-header">@DayOfWeek.Monday.ToString("D", System.Globalization.CultureInfo.CurrentCulture)</div>
        <div class="calendar-header">@DayOfWeek.Tuesday.ToString("D", System.Globalization.CultureInfo.CurrentCulture)</div>
        <div class="calendar-header">@DayOfWeek.Wednesday.ToString("D", System.Globalization.CultureInfo.CurrentCulture)</div>
        <div class="calendar-header">@DayOfWeek.Thursday.ToString("D", System.Globalization.CultureInfo.CurrentCulture)</div>
        <div class="calendar-header">@DayOfWeek.Friday.ToString("D", System.Globalization.CultureInfo.CurrentCulture)</div>
        <div class="calendar-header">@DayOfWeek.Saturday.ToString("D", System.Globalization.CultureInfo.CurrentCulture)</div>
        <div class="calendar-header">@DayOfWeek.Sunday.ToString("D", System.Globalization.CultureInfo.CurrentCulture)</div>

        @{
            bool isFirst = true;
            var daysOfWeek = new Dictionary<string, int> {
                { "Monday", 0 }, { "Tuesday", 1 }, { "Wednesday", 2 },
                { "Thursday", 3 }, { "Friday", 4 }, { "Saturday", 5 }, { "Sunday", 6 }
            };
        }

        @foreach (var cycle in Model.GetDailyPlanner())
        {
            var year = cycle.Item1;
            var month = cycle.Item2;
            var day = cycle.Item3;
            var dayName = cycle.Item4;
            var energy = cycle.Item5;

            // Add padding for first row
            if (isFirst)
            {
                var offset = daysOfWeek.ContainsKey(dayName) ? daysOfWeek[dayName] : 0;
                for (int i = 0; i < offset; i++)
                {
                    <div class="empty-cell"></div>
                }
                isFirst = false;
            }

            <div class="calendar-day">
                <div class="date-label">@day</div>
                <div class="custom-content">
                    <img loading="lazy" title="@energy.EnergyName" alt="@Dictionary.NineStarKiAstrologyFreeCalculator @energy.EnergyName" class="auto-size center-block" src="@DefaultValuesConfiguration.Instance.BaseImagesPath/ninestar/energies/@(energy.Energy.ToString().ToLower()).png" />
                    <h5 class="margin-bottom-0 padding-bottom-0">@energy.EnergyName</h5>
                    <p>@energy.CycleDescriptiveName</p>
                </div>
            </div>
        }
    </div>
</div>
